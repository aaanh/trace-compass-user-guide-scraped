<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>LTTng-UST Analyses - Trace Compass User Guide</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="../highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="../tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "../";
            const default_light_theme = "light";
            const default_dark_theme = "navy";
            window.path_to_searchindex_js = "../searchindex.js";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../toc.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>←</kbd> or <kbd>→</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
                sidebar_toggle.checked = false;
            }
            if (sidebar === 'visible') {
                sidebar_toggle.checked = true;
            } else {
                html.classList.remove('sidebar-visible');
            }
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Trace Compass User Guide</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <div class="search-wrapper">
                            <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                            <div class="spinner-wrapper">
                                <i class="fa fa-spinner fa-spin"></i>
                            </div>
                        </div>
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="lttng-ust-analyses"><a class="header" href="#lttng-ust-analyses">LTTng-UST Analyses</a></h1>
<p>The Userspace traces are taken on an application level. With kernel traces, you know what events you will have as the domain is known and cloistered. Userspace traces can contain pretty much anything. Some analyses are offered if certain events are enabled.</p>
<h2 id="flame-chart-view"><a class="header" href="#flame-chart-view">Flame Chart View</a></h2>
<p>The Flame Chart view allows the user to visualize the call stack per thread over time, if the application and trace provide this information.</p>
<p>To open this view go inWindow-&gt;Show View, if in the eclipse plug-in then clickOther...and selectTracing/Flame Chartin the list. The view shows the call stack information for the currently selected trace. Conversely, you can select a trace and expand it in theProject Explorerthen expandLTTng-UST CallStack Analysis(the trace must be loaded) and openFlame Chart.</p>
<p>The table on the left-hand side of the view shows the threads and call stack. The function name, depth, entry and exit time and duration are shown for the call stack at the selected time.</p>
<p>Double-clicking on a function entry in the table will zoom the time graph to the selected function's range of execution.</p>
<p>The time graph on the right-hand side of the view shows the call stack state graphically over time. The function name is visible on each call stack event if size permits. The color of each call stack event is randomly assigned based on the function name, allowing for easy identification of repeated calls to the same function.</p>
<p>Clicking on the time graph will set the current time and consequently update the table with the current call stack information.</p>
<p>Shift-clicking on the time graph will select a time range. When the selection is a time range, the begin time is used to update the stack information.</p>
<p>Double-clicking on a call stack event will zoom the time graph to the selected function's range of execution.</p>
<p>Clicking theSelect Next State ChangeorSelect Previous State Changeor using the left and right arrows will navigate to the next or previous call stack event, and select the function currently at the top of the call stack. Note that pressing theShiftkey at the same time will update the selection end time of the current selection.</p>
<p>Clicking theConfigure how addresses are mapped to function names() icon will open the symbol providers dialog. Depending on the available symbol providers for the given trace, you can specify: 1) a text or binary file containing mappings from function addresses to function names or 2) the root location of the binaries of the trace target. If the call stack provider for the current trace type only provides function addresses, a mapping file will be required to get the function names in the view. See the following sections for an example with LTTng-UST traces.</p>
<h3 id="using-the-flame-chart-view-with-lttng-ust-traces"><a class="header" href="#using-the-flame-chart-view-with-lttng-ust-traces">Using the Flame Chart View with LTTng-UST traces</a></h3>
<p>There is support in the LTTng-UST integration plugin to display the callstack
of applications traced with theliblttng-ust-cyg-profile.solibrary (see
theliblttng-ust-cyg-profileman page for additional information). To do
so, you need to:</p>
<ul>
<li>Recompile your application with "-g -finstrument-functions".</li>
<li>Set up a tracing session with the thevpid,vtidandprocnamecontexts. See theEnabling UST Events On Session LevelandAdding Contexts to Channels and Events of a Domainsections. Or if using the command-line:lttng enable-event -u -alttng add-context -u -t vpid -t vtid -t procname</li>
<li>lttng enable-event -u -a</li>
<li>lttng add-context -u -t vpid -t vtid -t procname</li>
<li>Preload theliblttng-ust-cyg-profilelibrary when running your program:LD_PRELOAD=/usr/lib/liblttng-ust-cyg-profile.so ./myprogram</li>
<li>LD_PRELOAD=/usr/lib/liblttng-ust-cyg-profile.so ./myprogram</li>
<li>Recompile your application with "-g -finstrument-functions".</li>
<li>Set up a tracing session with the thevpid,vtidandprocnamecontexts. See theEnabling UST Events On Session LevelandAdding Contexts to Channels and Events of a Domainsections. Or if using the command-line:lttng enable-event -u -alttng add-context -u -t vpid -t vtid -t procname</li>
<li>lttng enable-event -u -a</li>
<li>lttng add-context -u -t vpid -t vtid -t procname</li>
<li>lttng enable-event -u -a</li>
<li>lttng add-context -u -t vpid -t vtid -t procname</li>
<li>lttng enable-event -u -a</li>
<li>lttng add-context -u -t vpid -t vtid -t procname</li>
<li>Preload theliblttng-ust-cyg-profilelibrary when running your program:LD_PRELOAD=/usr/lib/liblttng-ust-cyg-profile.so ./myprogram</li>
<li>LD_PRELOAD=/usr/lib/liblttng-ust-cyg-profile.so ./myprogram</li>
<li>LD_PRELOAD=/usr/lib/liblttng-ust-cyg-profile.so ./myprogram</li>
<li>LD_PRELOAD=/usr/lib/liblttng-ust-cyg-profile.so ./myprogram</li>
</ul>
<p>Once you load the resulting trace, the Flame Chart View should be populated with
the relevant information.</p>
<p>Note that for non-trivial applications,liblttng-ust-cyg-profilegenerates alotof events! You may need to increase the channel's subbuffer size to
avoid lost events. Refer to theLTTng documentation.</p>
<p>For traces taken with LTTng-UST 2.8 or later, the Flame Chart View should show the
function names automatically, since it will make use of the debug information
statedump events (which are enabled when usingenable-event -u -a).</p>
<p>For traces taken with prior versions of UST, you would need to set the path to
the binary file or mapping manually:</p>
<h3 id="importing-a-binary-or-function-name-mapping-file-for-lttng-ust-28-traces"><a class="header" href="#importing-a-binary-or-function-name-mapping-file-for-lttng-ust-28-traces">Importing a binary or function name mapping file (for LTTng-UST &lt;2.8 traces)</a></h3>
<p>For LTTng-UST 2.8+, if it doesn't resolve symbols automatically, see theSource Lookup's Binary file location configuration.</p>
<p>If you followed the steps in the previous section, you should have a Flame Chart
View populated with function entries and exits. However, the view will display
the function addresses instead of names in the intervals, which are not very
useful by themselves. To get the actual function names, you need to:</p>
<ul>
<li>Click theConfigure how addresses are mapped to function names() button in the Flame Chart View.</li>
<li>Click theConfigure how addresses are mapped to function names() button in the Flame Chart View.</li>
</ul>
<p>Once again, multiple symbol providers can be available for a unique trace. Each symbol provider can be configured through its own tab. Thus, multiple sources can be used to map the function names to addresses. Below is an image of the basic symbol provider preference page which allows us to import binary or function name mapping files.</p>
<p>Simply click theAdd...button to add one or multiple mapping files. The mapping file could be one of two options:</p>
<ul>
<li>: a binary that was used for taking the trace.</li>
<li>: a binary that was used for taking the trace.</li>
<li>: a file generated from the binary usingnm myprogram &gt; mapping.txt. Select themapping.txtfile that was just created. If you are dealing with C++ executables, you may want to usenm --demangleinstead to get readable function names.</li>
<li>: a file generated from the binary usingnm myprogram &gt; mapping.txt. Select themapping.txtfile that was just created. If you are dealing with C++ executables, you may want to usenm --demangleinstead to get readable function names.</li>
</ul>
<p>The view should now update to display the function names instead. Make sure the
binary used for taking the trace is the one used for this step too (otherwise,
there is a good chance of the addresses not being the same).</p>
<p>Lastly, the basic symbol provider introduces the notion of priorities between the mapping files. The resolved symbols from the file at the top of the list will have a higher priority than the files listed below. The files can be moved using theUpandDownbuttons.</p>
<h3 id="navigation"><a class="header" href="#navigation">Navigation</a></h3>
<p>See Control Flow View'sUsing the mouse,Using the keyboardandZoom region.</p>
<h3 id="marker-axis"><a class="header" href="#marker-axis">Marker Axis</a></h3>
<p>See Control Flow View'sMarker Axis.</p>
<h2 id="flame-graph-view"><a class="header" href="#flame-graph-view">Flame Graph View</a></h2>
<p>This is an aggregate view of the function calls from theFlame Chart View. This shows a bird's eye view of what are the main
time sinks in the traced applications. Each entry in theFlame Graphrepresents an aggregation of all the calls to a function
in a certain depth of the call stack having the same caller. So, functions in theFlame Graphare aggregated by depth and
caller. This enables the user to find the most executed code path easily.</p>
<ul>
<li>In aFlame Graph, each entry (box) represents a function in the stack.</li>
<li>If one takes a single vertical line in the view, it represents a full call stack with parents calling children.</li>
<li>Thex-axisrepresents total duration (execution time) and not absolute time, so it is not aligned with the other views.</li>
<li>The width of an entry is the total time spent in that function, including time spent calling the children.</li>
<li>The total time can exceed the longest duration, if the program is pre-empted and not running during its trace time.</li>
<li>Each thread traced makes its own flame graph.</li>
<li>In aFlame Graph, each entry (box) represents a function in the stack.</li>
<li>If one takes a single vertical line in the view, it represents a full call stack with parents calling children.</li>
<li>Thex-axisrepresents total duration (execution time) and not absolute time, so it is not aligned with the other views.</li>
<li>The width of an entry is the total time spent in that function, including time spent calling the children.</li>
<li>The total time can exceed the longest duration, if the program is pre-empted and not running during its trace time.</li>
<li>Each thread traced makes its own flame graph.</li>
</ul>
<p>The function name is visible on each Flame graph event if the size permits. Each box in theFlame Graphhas the same color as the box representing the same function in theFlame Chart.</p>
<p>To open this view, select a trace, expand it in theProject Explorer, then expand theCall Graph Analysis(the trace must be loaded) and open theFlame Graph.
It's also possible to go inWindow-&gt;Show View-&gt;Tracingthen
selectFlame Graphin the list.</p>
<p>To use theFlame graph, one can navigate it and find which function is consuming the most self-time.
This can be seen as a large plateau. Then the entry can be inspected. At this point, the worst offender in
terms of CPU usage will be highlighted, however, it is not a single call to investigate, but rather the
aggregation of all the calls. Right mouse-clicking on that entry will open a context sensitive menu.
SelectingGo to minimumorGo to maximumwill take the user to the minimum or maximum
recorded times in the trace. This is interesting to compare and contrast the two.</p>
<p>Hovering over a function will show a tooltip with the statistics on a per-function basis. One can see the total and self times
(worst-case,best-case,average,total time,standard deviation,number of calls) for that function.</p>
<p>If one wishes to explore at a medium detail level between the "classic" flame graph view and the call stack view, a per-thread flame
graph view is available by selecting the coarser menu and clicking onContent PresentationthenPer-thread. To return to
the default mode, return to that menu and click onAggregate Threads.</p>
<h3 id="how-to-use-a-flame-graph"><a class="header" href="#how-to-use-a-flame-graph">How to use a Flame Graph</a></h3>
<p>Observing the time spent in each function can show where most of the time is spent and where one could optimize.
An example in the image above: one can see thatmp_sortis a recursive sort function, it takes approximately
40% of the execution time of the program. That means that perfectly parallelizing it can yield a gain of 20% for 2 threads, 33% for 3
and so forth. Looking at the functionprint_current_files, it takes about 30% of the time, and it has a childprint_many_per_linethat has a large
self time (above 10%). This could be another area that can be targeted for optimization. Knowing this in advance helps developers
know where to aim their efforts.</p>
<p>It is recommended to have a kernel trace as well as a user space trace in an experiment
while using theFlame Graphas it will show what is causing the largest delays.
When using theFlame Graphtogether with a call stack and a kernel trace,
an example work flow would be to find the worst offender in terms of time taken for a function
that seems to be taking too long. Then, using the context menuGo to maximum, one can navigate
to the maximum duration and see if the OS is, for example, preempting the function for too long,
or if the issue is in the code being executed.</p>
<h2 id="function-duration-statistics"><a class="header" href="#function-duration-statistics">Function Duration Statistics</a></h2>
<p>This displays the descriptive statistics of the 'wall time' durations of given functions. It gives an
overview of how often a function is called, how much total time it took, its mean duration as well as
its maximum, minimum times and the standard deviation.</p>
<p>If a time range is selected it will display the local statistics too.</p>
<p>This analysis is available if theFlame Graphis available.</p>
<h3 id="using-the-mouse"><a class="header" href="#using-the-mouse">Using the mouse</a></h3>
<ul>
<li>Double-click on the duration rulerwill zoom the graph to the selected duration range.</li>
<li>Shift-left-click or drag: Extend or shrink the selection range</li>
<li>Mouse wheel up/down: scroll up or down</li>
<li>Shift-mouse wheel up/down: scroll left or right</li>
<li>Ctrl-mouse wheel up/down: zoom in or out horizontally</li>
<li>Shift-Ctrl-mouse wheel up/down: zoom in or out vertically</li>
<li>Double-click on the duration rulerwill zoom the graph to the selected duration range.</li>
<li>Shift-left-click or drag: Extend or shrink the selection range</li>
<li>Mouse wheel up/down: scroll up or down</li>
<li>Shift-mouse wheel up/down: scroll left or right</li>
<li>Ctrl-mouse wheel up/down: zoom in or out horizontally</li>
<li>Shift-Ctrl-mouse wheel up/down: zoom in or out vertically</li>
</ul>
<p>When the mouse cursor is over entries (left pane):</p>
<ul>
<li>-: Collapse theFlame Graphof the selected thread</li>
<li>+: Expand theFlame Graphof the selected thread</li>
<li>-: Collapse theFlame Graphof the selected thread</li>
<li>+: Expand theFlame Graphof the selected thread</li>
</ul>
<h3 id="using-the-keyboard"><a class="header" href="#using-the-keyboard">Using the keyboard</a></h3>
<p>The following keyboard shortcuts are available:</p>
<ul>
<li>Down Arrow: selects the next stack depth</li>
<li>Up Arrow: selects the previous stack depth</li>
<li>Home: selects the first thread'sFlame Graph</li>
<li>End: selects the last thread'sFlame Graph's deepest depth</li>
<li>Enter: toggles the expansion state of the current thread in the tree</li>
<li>Ctrl + +: Zoom-in vertically</li>
<li>Ctrl + -: Zoom-out vertically</li>
<li>Ctrl + 0: Reset the vertical zoom</li>
<li>Down Arrow: selects the next stack depth</li>
<li>Up Arrow: selects the previous stack depth</li>
<li>Home: selects the first thread'sFlame Graph</li>
<li>End: selects the last thread'sFlame Graph's deepest depth</li>
<li>Enter: toggles the expansion state of the current thread in the tree</li>
<li>Ctrl + +: Zoom-in vertically</li>
<li>Ctrl + -: Zoom-out vertically</li>
<li>Ctrl + 0: Reset the vertical zoom</li>
</ul>
<h3 id="toolbar"><a class="header" href="#toolbar">Toolbar</a></h3>
<h3 id="importing-a-binary-or-function-name-mapping-file-for-lttng-ust-28-traces-1"><a class="header" href="#importing-a-binary-or-function-name-mapping-file-for-lttng-ust-28-traces-1">Importing a binary or function name mapping file (for LTTng-UST &lt;2.8 traces)</a></h3>
<p>See Flame Chart View'sImporting a binary or function name mapping file (for LTTng-UST &lt;2.8 traces).</p>
<h2 id="function-duration-density"><a class="header" href="#function-duration-density">Function Duration Density</a></h2>
<p>TheFunction Duration Densityview shows the function duration of function displayed by duration for the current active time window range. This is useful to find global outliers.</p>
<p>Using the right mouse button to drag horizontally it will update the table and graph to show only the density for the selected durations. Durations outside the selection range will be filtered out. Using the toolbar buttonthe zoom range will be reset.</p>
<h2 id="memory-usage"><a class="header" href="#memory-usage">Memory Usage</a></h2>
<p>The Memory Usage view allows the user to visualize the active memory usage per thread over time, if the application and trace provide this information.</p>
<p>The view shows the memory consumption for the currently selected trace.</p>
<p>The time chart plots heap memory usage graphically over time. There is one line per process, unassigned memory usage is mapped to "Other". Processes can be checked and unchecked in the tree on the left hand side.</p>
<p>The filter button:can be used to show only the active threads in the tree viewer. By default only the threads which have had memory usage variations in the visible time range will be shown, clicking the button will reveal all the threads.</p>
<p>In this implementation, the user needs to trace while hooking theliblttng-ust-libc-wrapperby runningLD_PRELOAD=liblttng-ust-libc-wrapper.so<exename>. This will add tracepoints to memory allocation and freeing to the heap, NOT shared memory or stack usage. If the contextsvtidandprocnameare enabled, then the view will associate the heap usage to processes. As detailed earlier, to enable the contexts, see theAdding Contexts to Channels and Events of a Domainsection. Or if using the command-line:</p>
<ul>
<li>lttng add-context -u -t vtid -t procname</li>
<li>lttng add-context -u -t vtid -t procname</li>
</ul>
<p>If thread information is available the view will look like this:</p>
<p>If thread information is not available it will look like this:</p>
<p>The time axis is aligned with other views that support automatic time axis alignment (seeAutomatic Time Axis Alignment).</p>
<p>The time range can be fully zoomed out by double-clicking the time axis or the home button.</p>
<p>Please note this view will not show shared memory or stack memory usage.</p>
<h3 id="navigation-1"><a class="header" href="#navigation-1">Navigation</a></h3>
<p>For navigation, see CPU Usage view'sUsing the mouse,Using the keyboardandZoom region.</p>
<h3 id="toolbar-1"><a class="header" href="#toolbar-1">Toolbar</a></h3>
<p>The viewtoolbar, located at the top right of the view, has shortcut buttons to perform common actions.</p>
<p>For details about the see CPU Usage view'sToolbar.</p>
<h3 id="view-menu"><a class="header" href="#view-menu">View Menu</a></h3>
<p>The Memory Usage Viewview menu, located at the top right of the view, has shortcut buttons to perform common actions:</p>
<p>Please note this view will not show shared memory or stack memory usage.</p>
<h2 id="source-lookup-for-lttng-ust-28"><a class="header" href="#source-lookup-for-lttng-ust-28">Source Lookup (for LTTng-UST 2.8+)</a></h2>
<p>Starting with LTTng 2.8, the tracer can now provide enough information to
associate trace events with their location in the original source code.</p>
<p>To make use of this feature, first make sure your binaries are compiled with
debug information (-g), so that the instruction pointers can be mapped to source
code locations. This lookup is made using theaddr2lineandnmcommand-line utilities,
which need to be installed and on the$PATHof the system running Trace
Compass.addr2lineandnmare available in most Linux distributions, Mac OS X, Windows using Cygwin and others.</p>
<p>The following trace events need to be present in the trace:</p>
<ul>
<li>lttng_ust_statedump:start</li>
<li>lttng_ust_statedump:end</li>
<li>lttng_ust_statedump:bin_info</li>
<li>lttng_ust_statedump:build_id</li>
<li>lttng_ust_statedump:start</li>
<li>lttng_ust_statedump:end</li>
<li>lttng_ust_statedump:bin_info</li>
<li>lttng_ust_statedump:build_id</li>
</ul>
<p>as well as the following contexts:</p>
<ul>
<li>vpid</li>
<li>ip</li>
<li>vpid</li>
<li>ip</li>
</ul>
<p>For ease of use, you can simply enable all the UST events when setting up your
session:</p>
<p>Note that you can also create and configure your session using theControl View.</p>
<p>If you want to track source locations in shared libraries loaded by the
application, you also need to enable the "lttng_ust_dl:*" events, as well
as preload the UST library providing them when running your program:</p>
<p>If all the required information is present, then theSource Locationcolumn
of the Event Table should be populated accordingly, and theOpen Source Codeaction should be available. Refer to the sectionEvent Source Lookupfor
more details.</p>
<p>TheBinary Locationinformation should be present even if the original
binaries are not available, since it only makes use of information found in the
trace. A+denotes a relative address (i.e. an offset within the object
itself), whereas a@denotes an absolute address, for
non-position-independent objects.</p>
<p>Example of a trace with debug info and corresponding Source Lookup information, showing a tracepoint originating from a shared library</p>
<h3 id="binary-file-location-configuration"><a class="header" href="#binary-file-location-configuration">Binary file location configuration</a></h3>
<p>To resolve addresses to function names and source code locations, the analysis
makes use of the binary files (executables or shared libraries) present on the
system. By default, it will look for the file paths as they are found in the
trace, which means that it should work out-of-the-box if the trace was taken on
the same machine that Trace Compass is running.</p>
<p>It is possible to configure aroot directorythat will be used as a prefix
for all file path resolutions. The button to open the configuration dialog is
calledConfigure how addresses are mapped to function namesand is
currently located in theFlame Chart View. Note that the Call Stack View
will also make use of this configuration to resolve its function names.</p>
<p>The symbol configuration dialog for LTTng-UST 2.8+ traces</p>
<p>This can be useful if a trace was taken on a remote target, and an image of that
target is available locally.</p>
<p>If a binary file is being traced on a target, the paths in the trace will refer
to the paths on the target. For example, if they are:</p>
<ul>
<li>/usr/bin/program</li>
<li>/usr/lib/libsomething.so</li>
<li>/usr/local/lib/libcustom.so</li>
<li>/usr/bin/program</li>
<li>/usr/lib/libsomething.so</li>
<li>/usr/local/lib/libcustom.so</li>
</ul>
<p>and an image of that target is copied locally on the system at/home/user/project/image, which means the binaries above end up at:</p>
<ul>
<li>/home/user/project/image/usr/bin/program</li>
<li>/home/user/project/image/usr/lib/libsomething.so</li>
<li>/home/user/project/image/usr/local/lib/libcustom.so</li>
<li>/home/user/project/image/usr/bin/program</li>
<li>/home/user/project/image/usr/lib/libsomething.so</li>
<li>/home/user/project/image/usr/local/lib/libcustom.so</li>
</ul>
<p>Then selecting the/home/user/project/imagedirectory in the configuration
dialog above will allow Trace Compass to read the debug symbols correctly.</p>
<p>Note that this path prefix will apply to both binary file and source file
locations, which may or may not be desirable.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../LTTng_Kernel_Analysis/Scheduler_wake_up_Scheduler_switch_Latency_Analysis/index.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../LTTng-UST_Analyses/Flame_Chart_View/index.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../LTTng_Kernel_Analysis/Scheduler_wake_up_Scheduler_switch_Latency_Analysis/index.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../LTTng-UST_Analyses/Flame_Chart_View/index.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->



    </div>
    </body>
</html>
